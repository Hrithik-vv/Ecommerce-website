<%- include("../../views/partials/admin/adminHeader.ejs") %>
<div class="content-header row mb-4">
  <div class="d-flex justify-content-between align-items-center w-100">
    <h2 class="content-title card-title">Customers</h2>
  </div>
</div>

<header class="card-header text-center mb-4">
  <form action="/admin/users/" method="get" class="d-inline">
    <div
      class="input-group input-group-sm border border-1 border-grey rounded-pill w-75 mx-auto"
    >
      <input
        type="text"
        class="form-control border-0 rounded-pill"
        placeholder="Search customers..."
        name="search"
      />
      <button class="btn btn-primary border-0 rounded-pill" type="submit">
        <i class="fas fa-search"></i> Search
      </button>
    </div>
  </form>
</header>

<div class="right mt-5">
  <table class="table table-striped table-bordered">
    <thead class="thead-light">
      <tr>
        <th scope="col"><b>Name</b></th>
        <th scope="col"><b>Email</b></th>
        <th scope="col"><b>Action</b></th>
      </tr>
    </thead>
    <tbody>
      <% for (let i = 0; i < data.length; i++) { %>
      <tr>
        <td><%= data[i].name %></td>
        <td><%= data[i].email %></td>
        <td>
          <% if (data[i].isBlocked === false) { %>
          <button class="btn btn-danger btn-sm">
            <a
              href="/admin/blockCustomer?id=<%= data[i]._id %>"
              class="text-white"
              style="text-decoration: none"
              >Block</a
            >
          </button>
          <% } else { %>
          <button class="btn btn-success btn-sm">
            <a
              href="/admin/unblockCustomer?id=<%= data[i]._id %>"
              class="text-white"
              style="text-decoration: none"
              >Unblock</a
            >
          </button>
          <% } %>
        </td>
      </tr>
      <% } %>
    </tbody>
  </table>
</div>

<!-- Pagination Section -->
<div class="container mt-4">
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center mb-4">
      <!-- Previous Button -->
      <li class="page-item <%= (currentPage === 1) ? 'disabled' : '' %>">
        <a
          class="page-link"
          href="?page=<%= currentPage - 1 %>"
          tabindex="-1"
          aria-disabled="true"
          >&laquo; Previous</a
        >
      </li>

      <!-- Page Numbers -->
      <% for (let i = 1; i <= totalPages; i++) { %>
      <li class="page-item <%= (i === currentPage) ? 'active' : '' %>">
        <a class="page-link" href="?page=<%= i %>"><%= i %></a>
      </li>
      <% } %>

      <!-- Next Button -->
      <li
        class="page-item <%= (currentPage === totalPages) ? 'disabled' : '' %>"
      >
        <a class="page-link" href="?page=<%= currentPage + 1 %>"
          >Next &raquo;</a
        >
      </li>
    </ul>
  </nav>
</div>

<%- include("../../views/partials/admin/adminFooter.ejs") %>

<!-- Add these external styles to further improve the design -->
<style>
    /* General Styles */
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      padding: 20px;
    }
  
    .content-header {
      margin-top: 20px;
      margin-bottom: 30px;
    }
  
    .card-header {
      padding: 20px;
      margin-bottom: 20px;
    }
  
    .card-title {
      font-size: 1.5rem;
      font-weight: 600;
    }
  
    /* Form Styles */
    .input-group-sm {
      max-width: 600px;
      margin: 0 auto;
    }
  
    .input-group .form-control {
      border-radius: 25px;
      padding: 12px 15px;
    }
  
    .input-group .btn {
      background-color: #007bff;
      color: white;
      border-radius: 25px;
      font-size: 14px;
      padding: 10px 15px;
    }
  
    .input-group .btn:hover {
      background-color: #0056b3;
    }
  
    /* Table Styles */
    .table {
      width: 100%;
      margin-top: 20px;
      margin-bottom: 20px;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }
  
    .table th,
    .table td {
      text-align: center;
      padding: 12px;
      font-size: 14px;
      border-bottom: 1px solid #dee2e6;
    }
  
    .table th {
      background-color: #f1f1f1;
      color: #343a40;
    }
  
    .table tbody tr:hover {
      background-color: #f8f9fa;
    }
  
    /* Button Styling */
    .btn {
      width: auto;
      padding: 8px 15px;
      font-size: 14px;
      border-radius: 5px;
      text-decoration: none;
    }
  
    .btn-danger {
      background-color: #dc3545;
      border-color: #dc3545;
    }
  
    .btn-success {
      background-color: #28a745;
      border-color: #28a745;
    }
  
    .btn-sm {
      padding: 6px 12px;
    }
  
    .btn:hover {
      opacity: 0.85;
      transition: opacity 0.3s ease;
    }
  
    /* Pagination Styling */
    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
  
    .pagination .page-item {
      margin-right: 5px;
    }
  
    .pagination .page-link {
      padding: 8px 16px;
      font-size: 14px;
      border-radius: 25px;
      color: #007bff;
      border: 1px solid #ddd;
    }
  
    .pagination .page-item.active .page-link {
      background-color: #007bff;
      border-color: #007bff;
      color: white;
    }
  
    .pagination .page-item.disabled .page-link {
      color: #6c757d;
      pointer-events: none;
    }
  
    /* Center the entire content */
    .right {
      width: 100%;
      max-width: 1100px;
      margin: 0 auto;
    }
  </style>
  
