<%- include("../../views/partials/user/header") %>
    <!-- Header Section End -->
    </body>
    </body>

    </html>
    <!DOCTYPE html>
    <html lang="en">
    <style>
        /* Product Details Container */


        /* Product Title and Description */
        .name h4 {
            font-size: 24px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            margin-left: 80px;
        }

        .des h6 {
            font-size: 15px;
            line-height: 1.6;
            color: #666;
            margin-bottom: 20px;
            margin-left: 80px;
        }

        /* Rating Styles */
        .rating {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            margin-left: 80px;
        }

        .rating .fa-star {
            color: #ffc107;
            margin-right: 2px;


        }

        .rating span {
            margin-left: 10px;
            color: #666;
            font-size: 14px;
            margin-left: 8px;
        }

        /* Price Styles */
        .price h3 {
            font-size: 28px;
            font-weight: 600;
            color: #000;
            margin-bottom: 20px;
            margin-left: 80px;
        }

        /* Status Indicators */
        .status-available {
            color: #28a745;
            font-weight: 500;
            margin-left: 80px;
        }

        .status-out-of-stock {
            color: #dc3545;
            font-weight: 500;
            margin-left: 80px;
        }

        .status-discontinued {
            color: #6c757d;
            font-weight: 500;
            margin-left: 80px;
        }

        /* Offer Badge */
        .offer-badgecont {
            margin: 15px 0;
            margin-left: 80px;
        }

        .offer-badge {
            display: inline-block;
            background-color: #dc3545;
            color: #fff;
            padding: 5px 12px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
        }

        /* Product Options Container */
        .product__details__option {
            padding: 20px 0;
            margin-left: 80px;  /* Align with other elements */
        }

        /* Common styles for option sections */
        .option-section {
            margin-bottom: 20px;
        }

        .option-title {
            font-size: 16px;
            font-weight: 500;
            color: #333;
            margin-bottom: 12px;
        }

        /* Color Options */
        .color-options {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .color-option {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            border: 2px solid transparent;
            transition: transform 0.2s;
        }

        .color-option input {
            display: none;
        }

        .color-option.selected {
            transform: scale(1.1);
            border-color: #000;
        }

        .color-option.available:hover {
            transform: scale(1.1);
        }

        .color-option.unavailable {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* Size Options */
        .size-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .size-option {
            min-width: 45px;
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
            cursor: pointer;
            background: white;
            transition: all 0.2s;
        }

        .size-option input {
            display: none;
        }

        .size-option.selected {
            background: #000;
            color: white;
            border-color: #000;
        }

        .size-option.available:hover {
            border-color: #000;
        }

        .size-option.unavailable {
            opacity: 0.4;
            cursor: not-allowed;
            background: #f5f5f5;
        }

        /* Tooltip for unavailable options */
        .unavailable {
            position: relative;
        }

        .unavailable:hover:after {
            content: 'Not available';
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            padding: 5px 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            margin-bottom: 5px;
        }

        /* Quantity and Add to Cart */
        .product__details__cart__option {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 25px 0;
        }

        .quantity {
            display: flex;
            align-items: center;
        }

        .pro-qty {
            width: 100px;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
        }

        .pro-qty input {
            width: 100%;
            text-align: center;
            border: none;
            padding: 10px;
            font-size: 14px;
        }

        .primary-btn {
            background-color: #000;
            color: #fff;
            padding: 12px 30px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            transition: opacity 0.3s ease;
            white-space: nowrap;
            margin-top: 30px;
            margin-left: 65px;
            /* Prevents text wrapping */
        }

        .primary-btn:hover {
            opacity: 0.9;
        }

        .product__details__btns__option {
            margin: 20px 0;
            margin-left: 40px;
            display: flex;
            align-items: center;
        }

        .product__details__btns__option a {
            display: inline-flex;
            color: #666;
            text-decoration: none;
            margin-right: 20px;
            font-size: 14px;
            align-items: center;
        }

        .product__details__btns__option a i {
            margin-right: 5px;
        }

        .product__details__btns__option a:hover {
            color: #000;
            text-decoration: none;
            font-weight: 500;
            transition: opacity 0.3s ease;
            white-space: nowrap;
        }

        /* Additional Details */
        .product__details__last__option {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            margin-left: 60px;
        }

        .product__details__last__option ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .product__details__last__option ul li {
            margin-bottom: 10px;
            color: #666;
            font-size: 14px;
        }

        .product__details__last__option ul li span {
            color: #333;
            font-weight: 500;
            margin-right: 10px;
        }

        /* Responsive Adjustments */
        @media (max-width: 900px) {
            .product__details__content {
                padding: 20px;
                margin-left: 60px;
                width: 500px;
            }

            .name h4 {
                font-size: 20px;
            }

            .price h3 {
                font-size: 24px;
            }

            .product__details__cart__option {
                flex-direction: column;
                align-items: stretch;
                margin-left: 80px;
            }

            .pro-qty {
                width: 100%;
            }

            .primary-btn {
                width: 100%;
                text-align: center;
            }
        }

        .product__details__tab {
            padding: 100px;
            padding-top: 10px;
        }

        .product__details__pic .nav-tabs .nav-item .nav-link .product__thumb__pic {
            height: 155px;
            width: 154px;
        }

        .custom-image img {
            width: 1900px;
        }


        .product__details__pic .nav-tabs .nav-item .nav-link .product__thumb__pic {
            height: 166px;
            width: 172px;
            margin-right: 800px;
        }

        .quantity-controls {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-left: 57px;

        }

        .quantity-input {
            width: 50px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            text-align: center;
            -webkit-appearance: none;
            -moz-appearance: textfield;
        }

        /* Show number arrows */
        .quantity-input::-webkit-outer-spin-button,
        .quantity-input::-webkit-inner-spin-button {
            -webkit-appearance: auto;
            margin: 0;
        }

        .add-to-cart-btn {
            background: #000;
            color: #fff;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
        }

        .add-to-cart-btn:hover {
            background: #333;
            transform: translateY(-1px);
        }

        .add-to-cart-btn:active {
            transform: translateY(0);
        }

        /* Remove focus outline */
        .quantity-input:focus,
        .add-to-cart-btn:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        .product__details__breadcrumb {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            color: #666;
            margin-left: 0;
            /* Align to the left */
        }

        .product__details__breadcrumb a {
            color: #000;
            text-decoration: none;
        }

        .product__details__breadcrumb a:hover {
            text-decoration: underline;
        }

        .product__details__breadcrumb span {
            font-weight: bold;
        }

        /* Variant availability styling */
        .product__details__option__size label.available {
            border: 2px solid #000;
            background-color: #fff;
            color: #000;
        }

        .product__details__option__size label.unavailable {
            opacity: 0.5;
            cursor: not-allowed;
            border: 1px solid #ddd;
            color: #999;
        }

        .product__details__option__color label.available {
            transform: scale(1.15);
            border: 2px solid #000;
        }

        .product__details__option__color label.available:after {
            border: 2px solid #000;
        }

        .product__details__option__color label.unavailable {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .product__details__option__color label.unavailable:after {
            border: 1px solid #ddd;
        }
    </style>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Product View Page</title>
        <!-- Include FontAwesome for icons -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

        <!-- Shop Details Section Begin -->
        <section class="shop-details">
            <div class="product__details__pic">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="product__details__breadcrumb">
                                <a href="/">Home</a>
                                <a href="/shop">Shop</a>
                                <span>Product Details</span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <!-- Side Thumbnails -->
                        <div class="col-lg-3 col-md-3">
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#tabs-1" role="tab">
                                        <div class="product__thumb__pic set-bg" data-setbg="<%= product.image1 %>">
                                        </div>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#tabs-2" role="tab">
                                        <div class="product__thumb__pic set-bg" data-setbg="<%= product.image2 %>">
                                        </div>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#tabs-3" role="tab">
                                        <div class="product__thumb__pic set-bg" data-setbg="<%= product.image3 %>">
                                        </div>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#tabs-4" role="tab">
                                        <div class="product__thumb__pic set-bg" data-setbg="<%= product.image4 %>">
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <!-- Main Image Display -->
                        <div class="col-lg-6 col-md-9">
                            <div class="tab-content">
                                <div class="tab-pane active" id="tabs-1" role="tabpanel">
                                    <div class="product__details__pic__item">
                                        <div class="custom-image">
                                            <img src="<%= product.image1 %>" alt="Product Image 1">
                                            <div class="custom-loupe"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="tabs-2" role="tabpanel">
                                    <div class="product__details__pic__item">
                                        <div class="custom-image">
                                            <img src="<%= product.image2 %>" alt="Product Image 2">
                                            <div class="custom-loupe"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="tabs-3" role="tabpanel">
                                    <div class="product__details__pic__item">
                                        <div class="custom-image">
                                            <img src="<%= product.image3 %>" alt="Product Image 3">
                                            <div class="custom-loupe"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="tabs-4" role="tabpanel">
                                    <div class="product__details__pic__item">
                                        <div class="custom-image">
                                            <img src="<%= product.image4 %>" alt="Product Image 4">
                                            <div class="custom-loupe"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Product Details -->
                        <div class="col-lg-3 col-md-6">
                            <div class="product__details__content">
                                <div class="name">
                                    <h4><%= product.productName %></h4>
                                </div>
                                <div class="des">
                                    <h6><%= product.description %></h6>
                                </div>

                                <div class="rating">
                                    <% for(let i = 0; i < 5; i++) { %>
                                        <i class="fa fa-star<%= i < product.rating ? '' : '-o' %>"></i>
                                    <% } %>
                                    <span> - <%= product.rating %> Rating</span>
                                </div>

                                <!-- Color and Size Selection -->
                                <div class="product__details__option">
                                    <!-- Color Selection -->
                                    <div class="option-section">
                                        <div class="option-title">Select Color</div>
                                        <div class="color-options">
                                            <% 
                                            const uniqueColors = Array.from(new Set(
                                                product.variants
                                                    .filter(v => v.color)
                                                    .map(v => v.color)
                                            ));
                                            
                                            uniqueColors.forEach((color, index) => { 
                                            %>
                                                <label class="color-option <%= index === 0 ? 'selected' : '' %>"
                                                       style="background-color: <%= color %>">
                                                    <input type="radio" name="color" value="<%= color %>"
                                                           <%= index === 0 ? 'checked' : '' %>>
                                                </label>
                                            <% }); %>
                                        </div>
                                    </div>

                                    <!-- Size Selection -->
                                    <div class="option-section">
                                        <div class="option-title">Select Size</div>
                                        <div class="size-options">
                                            <% 
                                            const uniqueSizes = Array.from(new Set(
                                                product.variants
                                                    .filter(v => v.size)
                                                    .map(v => v.size)
                                            ));
                                            
                                            uniqueSizes.forEach((size, index) => { 
                                            %>
                                                <label class="size-option <%= index === 0 ? 'selected' : '' %>">
                                                    <%= size %>
                                                    <input type="radio" name="size" value="<%= size %>"
                                                           <%= index === 0 ? 'checked' : '' %>>
                                                </label>
                                            <% }); %>
                                        </div>
                                    </div>
                                </div>

                                <!-- Price will be updated via JavaScript based on selected variant -->
                                <div class="price">
                                    <h3>₹ <span id="variant-price">
                                        <%= product.variants[0].price %>
                                    </span></h3>
                                </div>

                                <p class="<%= 
                                    product.status === 'Available' ? 'status-available' : 
                                    product.status === 'out of stock' ? 'status-out-of-stock' : 
                                    'status-discontinued' 
                                %>">
                                    <%= product.status %>
                                </p>

                                <!-- Add to Cart Form -->
                                <form action="/shopping-cart" method="POST" class="quantity-controls">
                                    <input type="hidden" name="productId" value="<%= product._id %>">
                                    <input type="hidden" name="variantId" id="selected-variant">
                                    <input type="number" name="quantity" value="1" min="1" max="" class="quantity-input" id="quantity-input">
                                    <button type="submit" class="add-to-cart-btn">Add to Cart</button>
                                </form>

                                <!-- Buy Now Form -->
                                <form action="/checkoutload" method="POST">
                                    <input type="hidden" name="productId" value="<%= product._id %>">
                                    <input type="hidden" name="variantId" id="checkout-variant">
                                    <input type="hidden" name="quantity" value="1">
                                    <button type="submit" class="primary-btn">Buy Now</button>
                                </form>
                            </div>

                            <!-- Wishlist and Compare -->
                            <div class="product__details__btns__option">
                                <a href="#"><i class="fa fa-heart"></i> Add to Wishlist</a>
                                <a href="#"><i class="fa fa-exchange"></i> Add to Compare</a>
                            </div>

                            <!-- Additional Details -->
                            <div class="product__details__last__option">
                                <ul>
                                    <li><span>SKU:</span> 3812912</li>
                                    <li><span>Categories:</span> Clothes</li>
                                    <li><span>Tag:</span> Clothes, Skin, Body</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="product__details__tab">
                        <ul class="nav nav-tabs" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" data-toggle="tab" href="#tabs-5" role="tab">Description</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#tabs-6" role="tab">Customer
                                    Previews(5)</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#tabs-7" role="tab">Additional
                                    information</a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane active" id="tabs-5" role="tabpanel">
                                <div class="product__details__tab__content">
                                    <p class="note">Nam tempus turpis at metus scelerisque placerat nulla deumantos
                                        solicitud felis. Pellentesque diam dolor, elementum etos lobortis des mollis
                                        ut risus. Sedcus faucibus an sullamcorper mattis drostique des commodo
                                        pharetras loremos.</p>
                                    <div class="product__details__tab__content__item">
                                        <h5>Products Infomation</h5>
                                        <p>A Pocket PC is a handheld computer, which features many of the same
                                            capabilities as a modern PC. These handy little devices allow
                                            individuals to retrieve and store e-mail messages, create a contact
                                            file, coordinate appointments, surf the internet, exchange text messages
                                            and more. Every product that is labeled as a Pocket PC must be
                                            accompanied with specific software to operate the unit and must feature
                                            a touchscreen and touchpad.</p>
                                        <p>As is the case with any new technology product, the cost of a Pocket PC
                                            was substantial during it's early release. For approximately $700.00,
                                            consumers could purchase one of top-of-the-line Pocket PCs in 2003.
                                            These days, customers are finding that prices have become much more
                                            reasonable now that the newness is wearing off. For approximately
                                            $350.00, a new Pocket PC can now be purchased.</p>
                                    </div>
                                    <div class="product__details__tab__content__item">
                                        <h5>Material used</h5>
                                        <p>Polyester is deemed lower quality due to its none natural quality's. Made
                                            from synthetic materials, not natural like wool. Polyester suits become
                                            creased easily and are known for not being breathable. Polyester suits
                                            tend to have a shine to them compared to wool and cotton suits, this can
                                            make the suit look cheap. The texture of velvet is luxurious and
                                            breathable. Velvet is a great choice for dinner party jacket and can be
                                            worn all year round.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="tabs-6" role="tabpanel">
                                <div class="product__details__tab__content">
                                    <div class="product__details__tab__content__item">
                                        <h5>Products Infomation</h5>
                                        <p>A Pocket PC is a handheld computer, which features many of the same
                                            capabilities as a modern PC. These handy little devices allow
                                            individuals to retrieve and store e-mail messages, create a contact
                                            file, coordinate appointments, surf the internet, exchange text messages
                                            and more. Every product that is labeled as a Pocket PC must be
                                            accompanied with specific software to operate the unit and must feature
                                            a touchscreen and touchpad.</p>
                                        <p>As is the case with any new technology product, the cost of a Pocket PC
                                            was substantial during it's early release. For approximately $700.00,
                                            consumers could purchase one of top-of-the-line Pocket PCs in 2003.
                                            These days, customers are finding that prices have become much more
                                            reasonable now that the newness is wearing off. For approximately
                                            $350.00, a new Pocket PC can now be purchased.</p>
                                    </div>
                                    <div class="product__details__tab__content__item">
                                        <h5>Material used</h5>
                                        <p>Polyester is deemed lower quality due to its none natural quality's. Made
                                            from synthetic materials, not natural like wool. Polyester suits become
                                            creased easily and are known for not being breathable. Polyester suits
                                            tend to have a shine to them compared to wool and cotton suits, this can
                                            make the suit look cheap. The texture of velvet is luxurious and
                                            breathable. Velvet is a great choice for dinner party jacket and can be
                                            worn all year round.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="tabs-7" role="tabpanel">
                                <div class="product__details__tab__content">
                                    <p class="note">Nam tempus turpis at metus scelerisque placerat nulla deumantos
                                        solicitud felis. Pellentesque diam dolor, elementum etos lobortis des mollis
                                        ut risus. Sedcus faucibus an sullamcorper mattis drostique des commodo
                                        pharetras loremos.</p>
                                    <div class="product__details__tab__content__item">
                                        <h5>Products Infomation</h5>
                                        <p>A Pocket PC is a handheld computer, which features many of the same
                                            capabilities as a modern PC. These handy little devices allow
                                            individuals to retrieve and store e-mail messages, create a contact
                                            file, coordinate appointments, surf the internet, exchange text messages
                                            and more. Every product that is labeled as a Pocket PC must be
                                            accompanied with specific software to operate the unit and must feature
                                            a touchscreen and touchpad.</p>
                                        <p>As is the case with any new technology product, the cost of a Pocket PC
                                            was substantial during it's early release. For approximately $700.00,
                                            consumers could purchase one of top-of-the-line Pocket PCs in 2003.
                                            These days, customers are finding that prices have become much more
                                            reasonable now that the newness is wearing off. For approximately
                                            $350.00, a new Pocket PC can now be purchased.</p>
                                    </div>
                                    <div class="product__details__tab__content__item">
                                        <h5>Material used</h5>
                                        <p>Polyester is deemed lower quality due to its none natural quality's. Made
                                            from synthetic materials, not natural like wool. Polyester suits become
                                            creased easily and are known for not being breathable. Polyester suits
                                            tend to have a shine to them compared to wool and cotton suits, this can
                                            make the suit look cheap. The texture of velvet is luxurious and
                                            breathable. Velvet is a great choice for dinner party jacket and can be
                                            worn all year round.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            </div>
        </section>
        <!-- Shop Details Section End -->

        <!-- Related Section Begin -->
        <section class="related spad">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <h3 class="related-title">Related Product</h3>
                    </div>
                </div>
               <!-- related products here -->
            </div>
        </section>
        <!-- Related Section End -->
        <!-- Footer Section Begin -->
        <footer class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-md-6 col-sm-6">
                        <div class="footer__about">
                            <div class="oxyboo-container" style="color: red;">
                                <h2 style="color: rgb(235, 235, 240);">Oxyboo</h2>
                            </div>
                            <p>The customer is at the heart of our unique business model, which includes design.</p>
                            <a href="#"><img src="img/payment.png" alt=""></a>
                        </div>
                    </div>
                    <div class="col-lg-2 offset-lg-1 col-md-3 col-sm-6">
                        <div class="footer__widget ">



                            <ul>
                                <li><a href="#">Clothing Store</a></li>
                                <li><a href="#">Trending Shoes</a></li>
                                <li><a href="#">Accessories</a></li>
                                <li><a href="#">Sale</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-3 col-sm-6">
                        <div class="footer__widget">
                            <h6>Shopping</h6>
                            <ul>
                                <li><a href="#">Contact Us</a></li>
                                <li><a href="#">Payment Methods</a></li>
                                <li><a href="#">Delivary</a></li>
                                <li><a href="#">Return & Exchanges</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-3 offset-lg-1 col-md-6 col-sm-6">
                        <div class="footer__widget">
                            <h6>NewLetter</h6>
                            <div class="footer__newslatter">
                                <p>Be the first to know about new arrivals, look books, sales & promos!</p>
                                <form action="#">
                                    <input type="text" placeholder="Your email">
                                    <button type="submit"><span class="icon_mail_alt"></span></button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12 text-center">
                        <div class="footer_copyright_text">
                            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                            <p>Copyright ©
                                <script>
                                    document.write(new Date().getFullYear());
                                </script>2020
                                All rights reserved | This template is made with <i class="fa fa-heart-o"
                                    aria-hidden="true"></i> by <a href="https://colorlib.com"
                                    target="_blank">Colorlib</a>
                            </p>
                            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Footer Section End -->

        <!-- Search Begin -->
        <div class="search-model">
            <div class="h-100 d-flex align-items-center justify-content-center">
                <div class="search-close-switch">+</div>
                <form class="search-model-form">
                    <input type="text" id="search-input" placeholder="Search here.....">
                </form>
            </div>
        </div>

        <!-- image zooming -->
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const containers = document.querySelectorAll('.custom-image');

                containers.forEach(container => {
                    const image = container.querySelector('img');
                    const loupe = container.querySelector('.custom-loupe');

                    // Enhanced zoom configuration
                    const config = {
                        loupeSize: 250,  // Increased zoom window size
                        zoomFactor: 3,   // Higher zoom level
                        // Stylish border color
                        backgroundColor: 'rgba(255,255,255,0.9)'  // Slight transparency
                    };

                    // Advanced styling for loupe
                    Object.assign(loupe.style, {
                        position: 'fixed',
                        width: `${config.loupeSize}px`,
                        height: `${config.loupeSize}px`,
                        border: `3px solid ${config.borderColor}`,
                        background: config.backgroundColor,
                        borderRadius: '50%',  // Circular zoom window
                        boxShadow: '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)',
                        pointerEvents: 'none',
                        display: 'none',
                        zIndex: '1000'
                    });

                    // Throttle function to improve performance
                    function throttle(func, limit) {
                        let inThrottle;
                        return function () {
                            const args = arguments;
                            const context = this;
                            if (!inThrottle) {
                                func.apply(context, args);
                                inThrottle = true;
                                setTimeout(() => inThrottle = false, limit);
                            }
                        }
                    }

                    // Enhanced mouse move handler
                    const handleMouseMove = throttle(function (e) {
                        const rect = image.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;

                        // More precise background positioning
                        const bgX = -(x * config.zoomFactor - config.loupeSize / 2);
                        const bgY = -(y * config.zoomFactor - config.loupeSize / 2);

                        // Update loupe styles
                        loupe.style.display = 'block';
                        loupe.style.left = `${e.pageX - config.loupeSize / 2}px`;
                        loupe.style.top = `${e.pageY - config.loupeSize / 2}px`;
                        loupe.style.backgroundImage = `url(${image.src})`;
                        loupe.style.backgroundSize = `${image.width * config.zoomFactor}px ${image.height * config.zoomFactor}px`;
                        loupe.style.backgroundPosition = `${bgX}px ${bgY}px`;
                    }, 10);  // 10ms throttle for performance

                    // Event listeners
                    container.addEventListener('mousemove', handleMouseMove);
                    container.addEventListener('mouseleave', () => {
                        loupe.style.display = 'none';
                    });
                });
            });
        </script>

        <script>
            document.querySelector('.primary-btn').addEventListener('click', function() {
                const productId = '<%= product._id %>'; // Use string format for MongoDB ObjectId
                const productName = '<%= product.productName %>';
                const variantId = document.getElementById('checkout-variant').value;
                const quantity = document.querySelector('.quantity-input').value;

                // Create product object
                const product = {
                    productId,
                    productName,
                    variantId,
                    quantity
                };

                // Send product data to the server using AJAX
                fetch('/add-to-cart', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(product)
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('Product added to cart');
                    } else {
                        alert('Failed to add product to cart');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            });
        </script>

        <!-- Add this JavaScript to handle variant selection -->
        <script>
            const variants = <%- JSON.stringify(product.variants) %>;
            const priceElement = document.getElementById('variant-price');
            const quantityInput = document.getElementById('quantity-input');
            const selectedVariantInput = document.getElementById('selected-variant');
            const checkoutVariantInput = document.getElementById('checkout-variant');

            function updateAvailableOptions() {
                const selectedColor = document.querySelector('input[name="color"]:checked')?.value;
                const selectedSize = document.querySelector('input[name="size"]:checked')?.value;

                // Get available sizes for selected color
                const availableSizes = selectedColor ? 
                    Array.from(new Set(variants
                        .filter(v => v.color === selectedColor)
                        .map(v => v.size))) : [];

                // Update size options
                document.querySelectorAll('.size-option').forEach(label => {
                    const sizeValue = label.textContent.trim();
                    const input = label.querySelector('input');
                    
                    if (!availableSizes.includes(sizeValue)) {
                        label.classList.add('unavailable');
                        label.classList.remove('available', 'selected');
                        input.disabled = true;
                    } else {
                        label.classList.remove('unavailable');
                        label.classList.add('available');
                        input.disabled = false;
                        if (input.checked) {
                            label.classList.add('selected');
                        }
                    }
                });

                // If current size is unavailable, select first available size
                const currentSizeInput = document.querySelector('input[name="size"]:checked');
                if (currentSizeInput && currentSizeInput.disabled) {
                    const firstAvailableSize = document.querySelector('.size-option.available input');
                    if (firstAvailableSize) {
                        firstAvailableSize.checked = true;
                        document.querySelectorAll('.size-option').forEach(label => {
                            label.classList.remove('selected');
                        });
                        firstAvailableSize.closest('.size-option').classList.add('selected');
                    }
                }
            }

            function updateVariantDetails() {
                const selectedColor = document.querySelector('input[name="color"]:checked')?.value;
                const selectedSize = document.querySelector('input[name="size"]:checked')?.value;

                // First update available options
                updateAvailableOptions();

                if (selectedColor && selectedSize) {
                    // Find the matching variant
                    const variant = variants.find(v => 
                        v.color === selectedColor && 
                        v.size === selectedSize
                    );

                    if (variant) {
                        // Update price display
                        priceElement.textContent = variant.price;
                        
                        // Update quantity max based on stock
                        quantityInput.max = variant.stock;
                        
                        // Update hidden variant IDs
                        selectedVariantInput.value = variant._id;
                        checkoutVariantInput.value = variant._id;

                        // Update quantity if current value exceeds new max
                        if (parseInt(quantityInput.value) > variant.stock) {
                            quantityInput.value = variant.stock;
                        }
                    }
                }
            }

            // Add click handlers for options
            document.querySelectorAll('.color-option, .size-option').forEach(option => {
                option.addEventListener('click', function(e) {
                    const input = this.querySelector('input');
                    if (input.disabled) {
                        e.preventDefault();
                        return;
                    }

                    // Remove selected class from siblings
                    const siblings = this.parentElement.querySelectorAll(
                        this.classList.contains('color-option') ? '.color-option' : '.size-option'
                    );
                    siblings.forEach(sib => sib.classList.remove('selected'));
                    
                    // Add selected class to this option
                    this.classList.add('selected');
                    input.checked = true;
                    
                    // Update variant details (which also updates available options)
                    updateVariantDetails();
                });
            });

            // Initialize with first available variant
            if (variants.length > 0) {
                const firstVariant = variants[0];
                const colorInput = document.querySelector(`input[name="color"][value="${firstVariant.color}"]`);
                const sizeInput = document.querySelector(`input[name="size"][value="${firstVariant.size}"]`);
                
                if (colorInput && sizeInput) {
                    colorInput.checked = true;
                    sizeInput.checked = true;
                    colorInput.closest('.color-option').classList.add('selected');
                    sizeInput.closest('.size-option').classList.add('selected');
                    updateVariantDetails(); // This will update both options and price
                }
            }

            // Initial update
            updateVariantDetails();
        </script>

        <!-- Add this function to your existing JavaScript -->
        <script>
            function updateBuyNowForm() {
                const selectedColor = document.querySelector('input[name="color"]:checked')?.value;
                const selectedSize = document.querySelector('input[name="size"]:checked')?.value;
                const quantity = document.querySelector('.quantity-input').value;

                // Find the selected variant
                const selectedVariant = variants.find(v => 
                    v.color === selectedColor && 
                    v.size === selectedSize
                );

                if (selectedVariant) {
                    // Update the hidden variant ID input
                    document.getElementById('checkout-variant').value = selectedVariant._id;
                    // Update the quantity input in the buy now form
                    document.querySelector('form[action="/checkout"] input[name="quantity"]').value = quantity;
                }
            }

            // Add this to your existing click handlers and updateVariantDetails function
            document.querySelectorAll('.color-option, .size-option, .quantity-input').forEach(element => {
                element.addEventListener('change', updateBuyNowForm);
            });

            // Add to initialization
            if (variants.length > 0) {
                updateBuyNowForm(); // Initialize the form with first variant
            }
        </script>

        <!-- Search End -->

        <!-- Js Plugins -->
        <script src="js/jquery-3.3.1.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/jquery.nice-select.min.js"></script>
        <script src="js/jquery.nicescroll.min.js"></script>
        <script src="js/jquery.magnific-popup.min.js"></script>
        <script src="js/jquery.countdown.min.js"></script>
        <script src="js/jquery.slicknav.js"></script>
        <script src="js/mixitup.min.js"></script>
        <script src="js/owl.carousel.min.js"></script>
        <script src="js/main.js"></script>
        </body>

    </html>